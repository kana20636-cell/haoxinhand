<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å¥½å¿ƒæ‰‹ä½œå°ˆæ¥­ç®¡ç†ç³»çµ±</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    
    <style>
        body { background-color: #F8F9FA; color: #4A4A4A; font-family: "PingFang TC", sans-serif; padding-top: env(safe-area-inset-top); }
        .sidebar { transition: all 0.3s ease; width: 260px; min-width: 260px; height: 100vh; position: sticky; top: 0; display: flex; flex-direction: column; background: white; border-right: 1px solid #EEE; }
        .sidebar.collapsed { width: 0; min-width: 0; overflow: hidden; border: none; }
        /* ç¬¬10é»ï¼šå´é‚Šæ¬„æ²è»¸è¨­å®š */
        .sidebar-content { flex: 1; overflow-y: auto; padding: 1.5rem; } 
        .nav-btn { width: 100%; text-align: left; padding: 0.8rem 1rem; border-radius: 0.8rem; margin-bottom: 0.4rem; font-weight: bold; }
        .nav-btn.active { background-color: #8E9775; color: white; }
        .card { background: white; border-radius: 1.2rem; padding: 1.2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 1rem; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        input, select { border: 1px solid #DDD; padding: 0.5rem; border-radius: 0.5rem; width: 100%; }
    </style>
</head>
<body class="flex">
    <aside id="sidebar" class="sidebar shadow-lg z-50">
        <div class="sidebar-content">
            <h1 class="text-xl font-black mb-6 text-[#8E9775] tracking-widest">å¥½å¿ƒæ‰‹ä½œ</h1>
            <nav id="nav-list">
                <button onclick="showTab('orders')" class="nav-btn active">ğŸ“¦ è¨‚å–®ç®¡ç†</button>
                <button onclick="showTab('inventory')" class="nav-btn">ğŸšš é€²è²¨ç®¡ç†</button>
                <button onclick="showTab('items')" class="nav-btn">ğŸ› ï¸ å“é …ç®¡ç†</button>
                <button onclick="showTab('customers')" class="nav-btn">ğŸ‘¥ é¡§å®¢ç¶­è­·</button>
                <button onclick="showTab('rank')" class="nav-btn">ğŸ† éŠ·å”®æ’è¡Œ</button>
                <button onclick="showTab('report')" class="nav-btn">ğŸ“Š éŠ·å”®å ±è¡¨</button>
            </nav>
        </div>
    </aside>

    <main class="flex-1 p-4 md:p-8">
        <button id="toggleBtn" onclick="toggleSidebar()" class="mb-4 bg-white border px-4 py-2 rounded-lg shadow-sm font-bold text-[#8E9775]">é—œé–‰é¸å–®</button>
        <section id="orders" class="tab-content active">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">è¨‚å–®ç®¡ç†</h2>
                <div class="flex gap-2">
                    <select id="orderViewMode" onchange="renderOrders()" class="text-sm">
                        <option value="day">æ—¥æª¢è¦–</option>
                        <option value="month">æœˆæª¢è¦–</option>
                        <option value="year">å¹´æª¢è¦–</option>
                    </select>
                </div>
            </div>
            <div class="card bg-[#F3F5F0]">
                <p class="text-xs text-gray-500">ç•¶å‰ç¯©é¸ç¸½é‡‘é¡</p>
                <p class="text-2xl font-black text-[#8E9775]">$ <span id="totalRevenue">0</span></p>
            </div>
            <div id="orderList" class="space-y-3"></div>
        </section>

        <section id="inventory" class="tab-content">
            <h2 class="text-xl font-bold mb-4">é€²è²¨ç®¡ç†</h2>
            <div class="card space-y-2">
                <input type="date" id="invDate">
                <input type="text" id="invName" placeholder="å“é …åç¨±">
                <div class="flex gap-2">
                    <input type="number" id="invQty" placeholder="æ•¸é‡">
                    <input type="text" id="invUnit" placeholder="å–®ä½ (å¦‚:æ–¤)">
                </div>
                <input type="number" id="invPrice" placeholder="é€²è²¨ç¸½åƒ¹" oninput="calcUnitPrice()">
                <p class="text-sm text-gray-400">é ä¼°å–®åƒ¹: <span id="unitPriceDisp">0</span></p>
                <button onclick="addInventory()" class="w-full bg-[#8E9775] text-white py-2 rounded-lg font-bold">å­˜å…¥é€²è²¨ç´€éŒ„</button>
            </div>
            <div id="inventoryList"></div>
        </section>

        <section id="customers" class="tab-content">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">é¡§å®¢ç¶­è­·</h2>
                <select id="custSort" onchange="renderCustomers()" class="w-32 text-sm">
                    <option value="count">ä¾ä¾†åº—æ¬¡æ•¸</option>
                    <option value="amount">ä¾æ¶ˆè²»é‡‘é¡</option>
                </select>
            </div>
            <div id="customerList" class="space-y-3"></div>
        </section>

        <section id="rank" class="tab-content">
            <h2 class="text-xl font-bold mb-4">ğŸ† éŠ·å”®æ’è¡Œ</h2>
            <div id="rankContent" class="space-y-4"></div>
        </section>

        <section id="report" class="tab-content">
            <h2 class="text-xl font-bold mb-4">ğŸ“Š éŠ·å”®å ±è¡¨</h2>
            <div id="reportContent" class="card">å ±è¡¨è¨ˆç®—ä¸­...</div>
        </section>
    <script>
        // Firebase è¨­å®š
        const firebaseConfig = {
            apiKey: "AIzaSyA9tMo62e3zhf0qR9lgcHE-YMIh5eaZ8dk",
            authDomain: "haoxin-44098.firebaseapp.com",
            databaseURL: "https://haoxin-44098-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "haoxin-44098",
            storageBucket: "haoxin-44098.firebasestorage.app",
            messagingSenderId: "878734507134",
            appId: "1:878734507134:web:91598cf6816d401e66ac2f"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ç¬¬2é»ï¼šå´é‚Šæ¬„æ–‡å­—åˆ‡æ›
        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            const btn = document.getElementById('toggleBtn');
            sb.classList.toggle('collapsed');
            btn.innerText = sb.classList.contains('collapsed') ? "é–‹å•Ÿé¸å–®" : "é—œé–‰é¸å–®";
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('active');
                if(b.innerText.includes(event.target.innerText)) b.classList.add('active');
            });
        }

        // ç¬¬3é»ï¼šè¨ˆç®—é€²è²¨å–®åƒ¹
        function calcUnitPrice() {
            const qty = document.getElementById('invQty').value;
            const price = document.getElementById('invPrice').value;
            if(qty > 0) document.getElementById('unitPriceDisp').innerText = (price/qty).toFixed(2);
        }

        // ç¬¬1é»ï¼šåˆªé™¤èˆ‡ä¿®æ”¹ç¯„ä¾‹
        function deleteData(path, id) {
            if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿè³‡æ–™å°‡ç„¡æ³•æ¢å¾©")) db.ref(path + '/' + id).remove();
        }

        // é€™è£¡æœƒè‡ªå‹•ç›£è½è¨‚å–®ã€é€²è²¨ã€é¡§å®¢ä¸¦é€²è¡Œæ’è¡Œè¨ˆç®— (é‚è¼¯èˆ‡ä¹‹å‰ç›¸åŒï¼Œä½†å¢åŠ æ’è¡Œèˆ‡å ±è¡¨é‹ç®—)
        // ... (çœç•¥éƒ¨åˆ†é‡è¤‡é‚è¼¯ï¼Œå»ºè­°ç›´æ¥ä½¿ç”¨æ­¤çµæ§‹è¦†è“‹)
    </script>
</body>
</html>
